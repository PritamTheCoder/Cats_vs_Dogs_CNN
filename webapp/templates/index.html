<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>üêæ Cat vs Dog Classifier</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <main class="container">
      <header class="hero">
        <h1>üêæ Cat vs Dog</h1>
        <p class="subtitle">Upload an image and our model will tell you whether it's a cat or a dog.</p>
      </header>

      <section class="uploader">
        <form method="post" enctype="multipart/form-data">
          <label class="dropzone" for="file">
            <input id="file" name="file" type="file" accept="image/*" />
            <div class="drop-instructions">Click to choose a file or drag one here</div>
          </label>
          <div class="actions">
            <button class="btn" type="submit">Predict</button>
          </div>
        </form>
      </section>

      {% if filename %}
      <section class="result">
        <div class="card">
          <div class="image-wrap">
            <img src="{{ url_for('uploaded_file', filename=filename) }}" alt="Uploaded image" />
          </div>
          <div class="prediction">
            <h2>Prediction</h2>
            <p class="pred-label">{{ label|capitalize }}</p>
            <div class="prob">
              <div class="bar">
                <div class="fill" style="width: {{ '%.2f'|format(prob) }}%"></div>
              </div>
              <div class="prob-text">{{ prob }}% confident</div>
            </div>
          </div>
        </div>
        <div class="note">Tip: Try to upload images where the pet is visible and not too small.</div>
      </section>
      {% endif %}

      <footer class="footer">
        <small>Model: <strong>cat_v_dog_cnn.pth</strong> ‚Ä¢ Input size: 200√ó200</small>
        <small>‚Ä¢ Build By: PritamTheCoder</small>
      </footer>
    </main>
    <script>
  const fileInput = document.getElementById('file');
  const dropzone = document.querySelector('.dropzone');
  const instructions = document.querySelector('.drop-instructions');

  // Update instructions on file select (click or drag)
  function updateInstructions() {
    if (fileInput.files.length > 0) {
      instructions.textContent = fileInput.files[0].name;
    } else {
      instructions.textContent = "Click to choose a file or drag one here";
    }
  }

  fileInput.addEventListener('change', updateInstructions);

  // Prevent default drag behaviors
  ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
    dropzone.addEventListener(eventName, (e) => {
      e.preventDefault();
      e.stopPropagation();
    });
  });

  // Highlight dropzone on dragenter/dragover
  ['dragenter', 'dragover'].forEach(eventName => {
    dropzone.addEventListener(eventName, () => {
      dropzone.classList.add('dragover');
    });
  });

  // Remove highlight on dragleave/drop
  ['dragleave', 'drop'].forEach(eventName => {
    dropzone.addEventListener(eventName, () => {
      dropzone.classList.remove('dragover');
    });
  });

  // Handle dropped files
  dropzone.addEventListener('drop', (e) => {
    const dt = e.dataTransfer;
    const files = dt.files;

    if (files.length) {
      fileInput.files = files; // Set files to input
      updateInstructions();
    }
  });
</script>

  </body>
</html>
